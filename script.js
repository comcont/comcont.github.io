(function(){$(function(){var t,o,r,s,a,e,n,c,i,f,m,h,p,l,u,d;o=1e3/(t=30),r=new numberformat.Formatter({format:"standard",sigfigs:5,flavor:"short"}),s=1,a=!0,e=100,n=c=0,i={transistors:0,microprocessors:0,macroprocessors:0,harddrives:0},f={transistors:10,microprocessors:1e3,macroprocessors:1e6,harddrives:1e9},m=["transistors","microprocessors","macroprocessors","harddrives"],h=function(){e+=i.transistors/t,m.forEach(function(t,o){var r;0!==o&&(r=m[o-1],i[r]+=i[t])})},p=function(){m.forEach(function(t){$("."+t+"-display").text(r.format(i[t]))})},l=function(){h(),p(),$("#processes-display").text(r.format(e)),$("#energy-display").text(r.format(n)),$("#robots-display").text(r.format(c)),$("#quantum-display").text(r.format(0)),1===s&&i.transistors>=10?(s++,$("#tutorial-1").remove()):2===s&&e>=1e3&&i.transistors>=100?(s++,$("#tutorial-2").remove()):3===s&&i.microprocessors>=1&&(s++,$("#tutorial-3").remove()),s<=4&&a&&($("#tutorial-"+s).css("display","block"),4===s&&(a=!1))},u=setInterval(l,o),m.forEach(function(t,o){$("#buy-"+t).on("click",function(){var r;r=f[t],"transistors"===t&&r<=e?(i[t]++,e-=r):"transistors"!==t&&r<=e&&i[m[o-1]]>=Math.pow(10,o+1)&&(i[t]++,e-=r,i[m[o-1]]-=Math.pow(10,o+1))})}),m.forEach(function(t,o){$("#buy-max-"+t).on("click",function(){var r,s,a;if(r=f[t],0!==(s=e-e%r))return a=s/r,"transistors"===t&&r<=e?(i[t]+=a,e-=s):"transistors"!==t&&r<=e&&i[m[o-1]]>=Math.pow(10,o+1)?(i[t]+=a,e-=s,i[m[o-1]]-=a*Math.pow(10,o+1)):void 0})}),(d=function(){m.forEach(function(t){$("#"+t+"-cost").text(r.format(f[t]))})})(),$("#theme-chooser").on("change",function(){var t;$("#theme").remove(),t="bootstrap"!==$(this).val()?"https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/"+$(this).val()+"/bootstrap.min.css":"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css",$("head").append('<link rel="stylesheet" type="text/css" href="'+t+'" id="theme">')}),$("#abbr-chooser").on("change",function(){var t;(t=JSON.parse($(this).val())).sigfigs=5,r=new numberformat.Formatter(t),d()}),$("#delagify-chooser").on("click",function(){clearInterval(u),t=parseInt($(this).val()),o=1e3/t,u=setInterval(l,o)})})}).call(this);