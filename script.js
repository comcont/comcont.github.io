(function(){$(function(){var t,r,o,s,a,e,n,c,i,f,m,h;t=new numberformat.Formatter({format:"standard",sigfigs:5,flavor:"short"}),r=1,o=100,s=a=0,e={transistors:0,microprocessors:0,macroprocessors:0,harddrives:0},n={transistors:10,microprocessors:1e3,macroprocessors:1e6,harddrives:1e9},c=["transistors","microprocessors","macroprocessors","harddrives"],i=function(){o+=e.transistors/30,c.forEach(function(t,r){var o;0!==r&&(o=c[r-1],e[o]+=e[t])})},f=function(){c.forEach(function(r){$("."+r+"-display").text(t.format(e[r]))})},m=function(){var n;i(),f(),$("#processes-display").text(t.format(o)),$("#energy-display").text(t.format(s)),$("#robots-display").text(t.format(a)),$("#quantum-display").text(t.format(0)),1===r&&e.transistors>=10?(r++,$("#tutorial-1").remove()):2===r&&o>=1e3&&e.transistors>=100?(r++,$("#tutorial-2").remove()):3===r&&e.microprocessors>=1&&(r++,$("#tutorial-3").remove()),r<=4&&n&&($("#tutorial-"+r).css("display","block"),4===r&&(n=!1))},setInterval(m,1e3/30),c.forEach(function(t,r){$("#buy-"+t).on("click",function(){var s;s=n[t],"transistors"===t&&s<=o?(e[t]++,o-=s):"transistors"!==t&&s<=o&&e[c[r-1]]>=Math.pow(10,r+1)&&(e[t]++,o-=s,e[c[r-1]]-=Math.pow(10,r+1))})}),c.forEach(function(t,r){$("#buy-max-"+t).on("click",function(){var s,a,i;if(s=n[t],0!==(a=o-o%s))return i=a/s,"transistors"===t&&s<=o?(e[t]+=i,o-=a):"transistors"!==t&&s<=o&&e[c[r-1]]>=Math.pow(10,r+1)?(e[t]+=i,o-=a,e[c[r-1]]-=i*Math.pow(10,r+1)):void 0})}),(h=function(){c.forEach(function(r){$("#"+r+"-cost").text(t.format(n[r]))})})(),$("#theme-chooser").on("change",function(){var t;$("#theme").remove(),t="bootstrap"!==$(this).val()?"https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/"+$(this).val()+"/bootstrap.min.css":"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css",$("head").append('<link rel="stylesheet" type="text/css" href="'+t+'" id="theme">')}),$("#abbr-chooser").on("change",function(){var r;(r=JSON.parse($(this).val())).sigfigs=5,t=new numberformat.Formatter(r),h()}),$("#delagify-chooser").on("click",function(){var t,r,o;return clearInterval(o),t=parseInt($(this).val()),r=1e3/t,o=setInterval(m,r)})})}).call(this);