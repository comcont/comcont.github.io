(function(){$(function(){var t,o,s,r,a,e,n,c,i,f,m,h,l,p,u,d,v;t=new Howl({src:["audio/bensound-scifi.mp3"],loop:!0,autoplay:!0,volume:.3,rate:1.5}),s=1e3/(o=30),r=new numberformat.Formatter({format:"standard",sigfigs:5,flavor:"short"}),a=1,e=!0,n=100,c=i=0,f={transistors:0,microprocessors:0,macroprocessors:0,harddrives:0},m={transistors:10,microprocessors:1e3,macroprocessors:1e6,harddrives:1e9},h=["transistors","microprocessors","macroprocessors","harddrives"],l=function(){n+=f.transistors/o,h.forEach(function(t,s){var r;0!==s&&(r=h[s-1],f[r]+=f[t]*(s+1)/o)})},p=function(){h.forEach(function(t){$("."+t+"-display").text(r.format(f[t]))})},u=function(){l(),p(),$("#processes-display").text(r.format(n)),$("#energy-display").text(r.format(c)),$("#robots-display").text(r.format(i)),$("#quantum-display").text(r.format(0)),1===a&&f.transistors>=10?(a++,$("#tutorial-1").remove()):2===a&&n>=1e3&&f.transistors>=100?(a++,$("#tutorial-2").remove()):3===a&&f.microprocessors>=1&&(a++,$("#tutorial-3").remove()),a<=4&&e&&($("#tutorial-"+a).css("display","block"),4===a&&(e=!1))},d=setInterval(u,s),h.forEach(function(t,o){$("#buy-"+t).on("click",function(){var s;s=m[t],"transistors"===t&&s<=n?(f[t]++,n-=s):"transistors"!==t&&s<=n&&f[h[o-1]]>=Math.pow(10,o+1)&&(f[t]++,n-=s,f[h[o-1]]-=Math.pow(10,o+1))})}),h.forEach(function(t,o){$("#buy-max-"+t).on("click",function(){var s,r,a;if(s=m[t],0!==(r=n-n%s))return a=r/s,"transistors"===t&&s<=n?(f[t]+=a,n-=r):"transistors"!==t&&s<=n&&f[h[o-1]]>=Math.pow(10,o+1)?(f[t]+=a,n-=r,f[h[o-1]]-=a*Math.pow(10,o+1)):void 0})}),(v=function(){h.forEach(function(t){$("#"+t+"-cost").text(r.format(m[t]))})})(),$("#theme-chooser").on("change",function(){var t;$("#theme").remove(),t="bootstrap"!==$(this).val()?"https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/"+$(this).val()+"/bootstrap.min.css":"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css",$("head").append('<link rel="stylesheet" type="text/css" href="'+t+'" id="theme">')}),$("#abbr-chooser").on("change",function(){var t;(t=JSON.parse($(this).val())).sigfigs=5,r=new numberformat.Formatter(t),v()}),$("#delagify-chooser").on("click",function(){clearInterval(d),o=parseInt($(this).val()),s=1e3/o,d=setInterval(u,s)}),$("#toggle-music").on("click",function(){$("#music-on").text(this.checked?"On":"Off"),this.checked?t.fade(0,.3,500):t.fade(.3,0,500)})})}).call(this);